"use strict";angular.module("gestigris-common",["ngAnimate","ngSanitize","ngMessages","ui.router","ngMaterial","leseulsteve.angular-mongoose","leseulsteve.angular-user-auth","pascalprecht.translate","btford.socket-io"]),angular.module("gestigris-common").config(["$urlRouterProvider","$httpProvider",function(a,b){a.otherwise("/"),b.interceptors.push(function(){return{request:function(a){if(!_.endsWith(a.url,".html")&&!_.endsWith(a.url,".json")&&!_.startsWith(a.url,"http")){var b="http://localhost:9011",c=a.url.split("/")[a.url.split("/").length-2];_.includes(["img","icons","/"],c)||_.endsWith(a.url,"md-close.svg")||_.endsWith(a.url,"md-tabs-arrow.svg")||(b+="/api/v1",a.url=b+"/"+a.url)}return a}}})}]),angular.module("gestigris-common").run(["$rootScope","$mdMedia",function(a,b){a.$mdMedia=b,a.$on("$stateChangeError",function(a,b,c,d,e,f){console.error("$stateChangeError: ",b,f)}),a.$on("$stateChangeStart",function(){a.loadingRoute=!0}),a.$on("$stateChangeSuccess",function(){a.loadingRoute=!1})}]),angular.module("gestigris-common").config(["$translateProvider",function(a){a.useStaticFilesLoader({prefix:"translations/locale-",suffix:".json"}),a.preferredLanguage("fr_CA")}]),angular.module("gestigris-common").service("Moment",function(){return moment.locale("ca-fr"),moment}),angular.module("gestigris-common").service("Toast",["$mdMedia","$mdToast",function(a,b){var c=function(b){this.position=a("sm")?"bottom fit":"bottom right",_.isString(b)?this.template="<md-toast>"+b+"</md-toast>":_.assign(this,b)};return c.prototype.show=function(){b.show(this)},c}]),angular.module("gestigris-common").config(["$mdIconProvider",function(a){a.iconSet("action","icons/2e79e525.action-icons.svg",24).iconSet("alert","icons/3741059a.alert-icons.svg",24).iconSet("av","icons/a38ceb29.av-icons.svg",24).iconSet("communication","icons/bf15dd98.communication-icons.svg",24).iconSet("content","icons/ab09cba1.content-icons.svg",24).iconSet("device","icons/b9b28764.device-icons.svg",24).iconSet("editor","icons/f52685d0.editor-icons.svg",24).iconSet("file","icons/d2796357.file-icons.svg",24).iconSet("hardware","icons/1f0d2702.hardware-icons.svg",24).iconSet("icons","icons/icons-icons.svg",24).iconSet("image","icons/2dd80997.image-icons.svg",24).iconSet("maps","icons/b8bbfe80.maps-icons.svg",24).iconSet("navigation","icons/2ce70a82.navigation-icons.svg",24).iconSet("notification","icons/23324a04.notification-icons.svg",24).iconSet("social","icons/301cdf30.social-icons.svg",24).iconSet("toggle","icons/4e19389b.toggle-icons.svg",24)}]),angular.module("gestigris-common").config(["$mdThemingProvider",function(a){var b=a.extendPalette("green",{500:"859D47"}),c=a.extendPalette("orange",{A200:"F26533"}),d=a.extendPalette("red",{500:"EC2F58"});a.definePalette("vertGris",b),a.definePalette("orangeGris",c),a.definePalette("redGris",d)}]),angular.module("gestigris-common").directive("avatar",["$mdDialog",function(a){return{restrict:"E",scope:{user:"="},templateUrl:"modules/users/views/avatar.html",compile:function(b,c){return _.isUndefined(c.clickToUpdate)||(b.append('<input style="display:none;" type="file"/>'),b.append('<div class="md-caption text-center">Cliquez pour changer</div>'),b.css("cursor","pointer")),function(b,d){if(b.$watch("user",function(a){a&&(b.hasImage=!_.isUndefined(a.avatar))},!0),!_.isUndefined(c.clickToUpdate)){var e=d.find("input");d.bind("click",function(){e[0].click()}),e.bind("change",function(c){var d=new FileReader;b.myImage="",b.myCroppedImage="",d.onload=function(c){b.$apply(function(){b.myImage=c.target.result}),a.show({templateUrl:"modules/users/views/avatar.dialog.html",parent:angular.element(document.body),targetEvent:c,scope:b,preserveScope:!0}),b.change=function(){b.user.avatar=b.myCroppedImage,b.user.save().then(function(c){a.hide(),_.assign(b.user,c)})},b.cancel=function(){a.hide()}},d.readAsDataURL(c.currentTarget.files[0])})}}}}}]),angular.module("gestigris-common").run(["$templateCache",function(a){a.put("modules/users/views/avatar.html",'<div><md-icon ng-if=!hasImage md-svg-icon=action:face class=md-avatar alt=user.toString()><md-tooltip ng-if="user._id !== currentUser._id">{{ user.toString() }}</md-tooltip></md-icon><div ng-if=hasImage><img ng-src="{{ user.avatar }}" alt="{{ user.toString() }}"><md-tooltip ng-if="user._id !== currentUser._id">{{ user.toString() }}</md-tooltip></div></div>')}]);